name: "Create Branch QA"

on:
  workflow_dispatch:

jobs:
  create-branch-qa:
    name: "Job Create Branch QA"
    runs-on: ubuntu-latest
    steps:
      - name: Checkout project
        uses: actions/checkout@v3
      - run: |
            git config --global user.email "${{ secrets.GITUSERNAME }}"
            git config --global user.name "${{ secrets.GITUSEREMAIL }}"
            git config --global pull.ff only
            pwd
            ls -loarth
            git clone "https://${{ secrets.GITUSERNAME }}:${{ secrets.GITHUBWRITETOKEN }}@github.com/${{ secrets.GITUSERNAME }}/poc-deps-up-to-date.git"
            git fetch
            cd poc-deps-up-to-date
            pwd
            ls -loarth
            git pull orgin master
            git checkout branch-main
            git pull orgin branch-main
            git checkout branch-test
            git pull orgin branch-test
            git checkout -b QA
            git merge branch-main --no-edit --allow-unrelated-histories
            git merge branch-test --no-edit --allow-unrelated-histories
            git push orgin QA
